<!doctype html>
<html>
  <head>
    <title>ATR/RTT Monitor</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"> 
    <meta http-equiv="Content-Language" content="en-us">
    <style>
      .dataContainer {
        position: relative;
        width: 1050px;
        margin: 0 auto;
        padding: 0;
      }
      .column {
        width: 500px;
        float: left;
        display: inline;
        margin-left: 10px;
        margin-right: 10px;
      }
    </style>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/lib/NetMonitor.js"></script>
    <script>
      document.addEventListener('DOMContentLoaded', function (event) {
        var lineCfg = {lineWidth:2,strokeStyle:'#19ff00'}
        //TODO avoind having 2 configurations
        var rttChartCfg = {millisPerPixel:42,maxValueScale:0.8,interpolation:'step',scaleSmoothing:0.205,grid:{sharpLines:true,millisPerLine:2000,verticalSections:6},labels:{fontSize:18},timestampFormatter:SmoothieChart.timeFormatter,minValue:0,maxValue:100,horizontalLines:[{color:'#ffffff',lineWidth:1,value:0},{color:'#880000',lineWidth:2,value:3333},{color:'#880000',lineWidth:2,value:-3333}]}

        var atrChartCfg = {millisPerPixel:42,maxValueScale:0.8,interpolation:'step',scaleSmoothing:0.205,grid:{sharpLines:true,millisPerLine:2000,verticalSections:6},labels:{fontSize:18},timestampFormatter:SmoothieChart.timeFormatter,minValue:0,maxValue:100,horizontalLines:[{color:'#ffffff',lineWidth:1,value:0},{color:'#880000',lineWidth:2,value:3333},{color:'#880000',lineWidth:2,value:-3333}]}

        var rttCharts = ['rtt-clu-neu', 'rtt-clu-bor', 'rtt-clu-lan']
        var atrCharts = ['atr-clu-neu', 'atr-clu-bor', 'atr-clu-lan']

        var socket = io()
        var monitor = new AtrRttMonitor(rttCharts, atrCharts, socket, rttChartCfg,
           atrChartCfg, lineCfg)
        // Fetching ATR/RTT/ZK streams in a periodic way
        monitor.getStreams()
      })
    </script>
  </head>
  <body>
    <div class="dataContainer">
      <div class="column">
        <label>RTT in [ms] of link: CLU-NEU</label>
        <br>
        <canvas id="rtt-clu-neu" width="400" height="300"></canvas>
      </div>
      <div class="column">
        <label>ATR in [Mbits/s] of link: CLU-NEU</label>
        <br>
        <canvas id="atr-clu-neu" width="400" height="300"></canvas>
      </div>
      <br><br>
      <div class="column">
        <label>RTT in [ms] of link: CLU-BOR</label>
        <br>
        <canvas id="rtt-clu-bor" width="400" height="300"></canvas>
      </div>
      <div class="column">
        <label>ATR in [Mbits/s] of link: CLU-BOR</label>
        <br>
        <canvas id="atr-clu-bor" width="400" height="300"></canvas>
      </div>
      <br><br>
      <div class="column">
        <label>RTT in [ms] of link: CLU-LAN</label>
        <br>
        <canvas id="rtt-clu-lan" width="400" height="300"></canvas>
      </div>
      <div class="column">
        <label>ATR in [Mbits/s] of link: CLU-LAN</label>
        <br>
        <canvas id="atr-clu-lan" width="400" height="300"></canvas>
      </div>
    </div>
  </body>
</html>
      
